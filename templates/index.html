<!DOCTYPE html>
<html lang="es" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Comercial - Carnes San Mart√≠n</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #7f8c8d;
            --accent: #3498db;
            --light: #f8f9fa;
            --medium: #e9ecef;
            --dark: #6c757d;
            --success: #198754;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #0dcaf0;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            color: var(--primary);
        }
        
  
        
        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }
        
        .stat-card {
            text-align: center;
            padding: 1.5rem 1rem;
        }
        

        
        .stat-icon img {
            width: 80px;
            height: 80px;
            object-fit: contain;
        }
        
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--dark);
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .stat-badge {
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 6px;
            font-weight: 500;
        }
        
        .badge-distribuidor { background: rgba(220, 53, 69, 0.1); color: var(--danger); }
        .badge-oro { background: rgba(255, 193, 7, 0.1); color: var(--warning); }
        .badge-satelite { background: rgba(13, 110, 253, 0.1); color: var(--info); }
        .badge-centro { background: rgba(25, 135, 84, 0.1); color: var(--success); }
        
        .header-compact {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .total-badge-compact {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-modern {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border: none;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-modern:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(242, 243, 243, 0.4);
            color: white;
        }
        
        .action-card-compact {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 1.25rem;
            transition: all 0.3s ease;
        }
        
        .action-card-compact:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }
        
        .compact-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            color: var(--primary);
        }
        
        .compact-subtitle {
            font-size: 0.9rem;
            color: var(--dark);
            margin-bottom: 0;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.75rem;
            margin-top: 1rem;
        }
        
        .info-item {
            text-align: center;
            padding: 0.75rem;
            background: rgba(248, 249, 250, 0.7);
            border-radius: 8px;
            border: 1px solid rgba(233, 236, 239, 0.5);
        }
        
        .info-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }
        
        .info-label {
            font-size: 0.75rem;
            color: var(--dark);
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .header-compact .row {
                text-align: center;
            }
            
            .total-badge-compact {
                margin-top: 1rem;
                display: inline-block;
            }
            
            .action-card-compact .row {
                text-align: center;
            }
            
            .action-card-compact .text-md-end {
                text-align: center !important;
                margin-top: 1rem;
            }
            
            .stat-card {
                padding: 1rem 0.5rem;
            }
            
            .stat-number {
                font-size: 1.75rem;
            }
        }
        
        @media (max-width: 576px) {
            .container {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
            }
            
            .header-compact {
                padding: 1rem;
                margin-bottom: 1rem;
            }
            
            .stat-icon {
                width: 80px;
                height: 80px;
            }
            
            .stat-icon img {
                width: 80px;
                height: 80px;
            }
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }
        
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container py-3">
        <!-- Header Compacto -->
        <div class="header-compact fade-in">
            <div class="row align-items-center">
                <div class="col-lg-9 col-md-8">
                    <h4 class="fw-bold mb-1">üåç Mapa Comercial</h4>
                    <p class="text-muted mb-2">Distribuidora de Carnes San Mart√≠n - Costa Rica</p>
                    <div class="d-flex gap-2 flex-wrap">

                    </div>
                </div>
                <div class="col-lg-3 col-md-4 text-center text-md-end">
                    <div class="total-badge-compact">
                        <small class="opacity-90">Total Activos</small>
                        <div class="h4 mb-0 fw-bold">{{ stats.total_general }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Grid de Estad√≠sticas Compacto -->
        <div class="row g-3 mb-4">
            <!-- Centros de Distribuci√≥n -->
            <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="glass-card stat-card fade-in">
                    <div class="stat-icon">
                        <img src="/static/images/logo-verde-activo.png" alt="Centros">
                    </div>
                    <div class="stat-number">{{ stats.centros_distribucion }}</div>
                    <div class="stat-label">Centros Distribuci√≥n</div>
                    <span class="stat-badge badge-centro">
                        <i class="fas fa-warehouse me-1"></i>Log√≠stica y Almacenaje
                    </span>
                </div>
            </div>
            
            <!-- Distribuidores Autorizados -->
            <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="glass-card stat-card fade-in">
                    <div class="stat-icon">
                        <img src="/static/images/logo-rojo-activo.png" alt="Distribuidores">
                    </div>
                    <div class="stat-number">{{ stats.distribuidores }}</div>
                    <div class="stat-label">Distribuidores Autorizados</div>
                    <span class="stat-badge badge-distribuidor">
                        <i class="fas fa-store me-1"></i>Venta Detalle
                    </span>
                </div>
            </div>
            
            <!-- Tiendas de Oro -->
            <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="glass-card stat-card fade-in">
                    <div class="stat-icon">
                        <img src="/static/images/logo-dorado-activo.png" alt="Tiendas Oro">
                    </div>
                    <div class="stat-number">{{ stats.tiendas_oro }}</div>
                    <div class="stat-label">Tiendas Oro</div>
                    <span class="stat-badge badge-oro">
                        <i class="fas fa-star me-1"></i>Cogeladores
                    </span>
                </div>
            </div>

            <!-- Tiendas Sat√©lite -->
            <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="glass-card stat-card fade-in">
                    <div class="stat-icon">
                        <img src="/static/images/logo-azul-activo.png" alt="Tiendas Sat√©lite">
                    </div>
                    <div class="stat-number">{{ stats.tiendas_satelite }}</div>
                    <div class="stat-label">Tiendas Sat√©lite</div>
                    <span class="stat-badge badge-satelite">
                        <i class="fas fa-network-wired me-1"></i>Red
                    </span>
                </div>
            </div>
        </div>

        <!-- Panel de Acciones Compacto -->
        <div class="row g-3 mb-4">
            <!-- Mapa Interactivo -->
            <div class="col-12">
                <div class="action-card-compact fade-in">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h5 class="compact-title">
                                <i class="fas fa-map-marked-alt me-2 text-primary"></i>
                                Mapa Interactivo
                            </h5>
                            <p class="compact-subtitle">
                                Visualice todas las ubicaciones en tiempo real con filtros avanzados
                            </p>
                        </div>
                        <div class="col-md-4 text-md-end">
                            <a href="/mapa" class="btn btn-modern btn-sm">
                                <i class="fas fa-play me-1"></i>Abrir Mapa
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% if stats.aperturas_2026 and (stats.aperturas_2026.distribuidores > 0 or stats.aperturas_2026.tiendas_oro > 0 or stats.aperturas_2026.tiendas_satelite > 0 or stats.aperturas_2026.centros_distribucion > 0) %}
<div class="row mb-4">
    <div class="col-12">
        <div class="action-card-compact fade-in">
            <h6 class="compact-title mb-3">
                <i class="fas fa-rocket me-2 text-success"></i>
                Expansi√≥n 2026
                <span class="badge bg-success ms-2">Nuevo</span>
            </h6>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-value">{{ stats.aperturas_2026.distribuidores or 0 }}</div>
                    <div class="info-label">Distribuidores Autorizados 2026</div>
                </div>
                <div class="info-item">
                    <div class="info-value">{{ stats.aperturas_2026.tiendas_oro or 0 }}</div>
                    <div class="info-label">Tiendas Oro 2026</div>
                </div>
                <div class="info-item">
                    <div class="info-value">{{ stats.aperturas_2026.tiendas_satelite or 0 }}</div>
                    <div class="info-label">Tiendas Sat√©lite 2026</div>
                </div>
                
            </div>
        </div>
    </div>
</div>
{% else %}
<!-- Mensaje alternativo si no hay expansiones 2026 -->
<div class="row mb-4">
    <div class="col-12">
        <div class="action-card-compact fade-in">
            <h6 class="compact-title mb-3">
                <i class="fas fa-calendar-check me-2 text-secondary"></i>
                Planificaci√≥n Futura
            </h6>
            <div class="text-center py-3">
                <p class="text-muted mb-0">No hay aperturas programadas para 2026</p>
                <small class="text-muted">Consulte el panel de gesti√≥n para agregar nuevas ubicaciones</small>
            </div>
        </div>
    </div>
</div>
{% endif %}

        <!-- Mantenimiento Compacto -->
        <div class="row">
            <div class="col-12">
                <div class="action-card-compact fade-in">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h5 class="compact-title">
                                <i class="fas fa-tools me-2 text-secondary"></i>
                                Panel de Gesti√≥n
                            </h5>
                            <p class="compact-subtitle">
                                Administraci√≥n avanzada del sistema (acceso restringido)
                            </p>
                        </div>
                        <div class="col-md-4 text-md-end">
                            <a href="/acceso-mantenimiento" class="btn btn-outline-secondary btn-sm">
                                <i class="fas fa-lock me-1"></i>Acceder
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Compacto -->
        <div class="row mt-4">
            <div class="col-12 text-center">
                <p class="text-muted mb-1">
                    <small>
                        <i class="fas fa-shield-alt me-1"></i>
                        Sistema seguro | Carnes San Mart√≠n
                    </small>
                </p>
                <p class="text-muted">
                    <small>
                        <i class="fas fa-map-marker-alt me-1"></i>
                        Costa Rica ‚Ä¢ 
                        <i class="fas fa-clock me-1"></i>
                        {{ now.strftime('%d/%m/%Y %H:%M') if now else 'Actualizado' }}
                    </small>
                </p>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar tooltips
            const tooltips = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltips.map(t => new bootstrap.Tooltip(t));
            
            // Animaci√≥n de entrada escalonada
            const fadeElements = document.querySelectorAll('.fade-in');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                        }, index * 100);
                    }
                });
            }, { threshold: 0.1 });
            
            fadeElements.forEach(el => observer.observe(el));
            
            // Efectos hover mejorados
            const cards = document.querySelectorAll('.glass-card, .action-card-compact');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
</body>
</html> 